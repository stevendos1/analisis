@inherits LayoutComponentBase

<div class="app-shell @(isNavOpen ? "nav-open" : string.Empty)">
    <aside class="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-brand" role="button" tabindex="0" @onclick="@(() => NavigationManager.NavigateTo("/"))" @onkeypress="@((KeyboardEventArgs e) => HandleBrandKeyPress(e))">Spend'nt</span>
            <button class="icon-button close-nav" type="button" aria-label="Cerrar menú" @onclick="ToggleNav">
                <span class="bi bi-x-lg"></span>
            </button>
        </div>
        <NavMenu />
    </aside>

    <div class="main-area">
        <header class="top-bar">
            <button class="icon-button menu-button" type="button" aria-label="Abrir menú" @onclick="ToggleNav">
                <span class="bi bi-list"></span>
            </button>
            <div class="top-bar-brand">
                <span class="brand-name">Spend'nt</span>
            </div>
            <nav class="top-actions">
                <a href="swagger" target="_blank" rel="noopener noreferrer">Swagger</a>
                <a href="https://learn.microsoft.com/aspnet/core/" target="_blank" rel="noopener noreferrer">Docs</a>
            </nav>
        </header>

        <main class="content-area">
            <section class="page-content">
                @Body
            </section>
        </main>
    </div>

    <div class="nav-overlay" @onclick="ToggleNav"></div>
</div>

@code {
    private bool isNavOpen;

    [Inject]
    private NavigationManager NavigationManager { get; set; } = default!;

    private void ToggleNav()
    {
        isNavOpen = !isNavOpen;
    }

    private void HandleBrandKeyPress(KeyboardEventArgs args)
    {
        if (args.Key == "Enter" || args.Key == " ")
        {
            NavigationManager.NavigateTo("/");
        }
    }
}
